(this["webpackJsonpdorados-calendar"]=this["webpackJsonpdorados-calendar"]||[]).push([[0],{25:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),r=n(20),a=n.n(r),s=(n(25),n(2)),l=n(0);function o(){return Object(l.jsx)("nav",{children:Object(l.jsx)("img",{src:"./dorados.jpg",alt:"Los Dorados Logo"})})}var u=n(4),d=n.n(u),j=n(5),b=function(e,t,n){var i=Object(j.a)({},t);"roleSelection"===e.target.name?i.role=e.target.value:"suit"===e.target.name?i.suit=e.target.value:i[e.target.id]=e.target.value,n(i)};function h(e){var t=Object(i.useState)({}),n=Object(s.a)(t,2),c=n[0],r=n[1],a=Object(i.useState)(!1),o=Object(s.a)(a,2),u=o[0],j=o[1];return Object(l.jsxs)("div",{className:"signup wrapper",children:[Object(l.jsx)("h2",{children:"Sign Up"}),Object(l.jsxs)("form",{action:"submit",children:[Object(l.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(l.jsx)("input",{name:"name",type:"text",id:"name",onChange:function(e){return b(e,c,r)},required:!0}),Object(l.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(l.jsx)("input",{name:"email",type:"text",id:"email",onChange:function(e){return b(e,c,r)},required:!0}),Object(l.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(l.jsx)("input",{name:"password",type:"password",id:"password",onChange:function(e){return b(e,c,r)},required:!0}),Object(l.jsx)("label",{htmlFor:"passwordConfirm",children:"Confirm Password: "}),Object(l.jsx)("input",{name:"passwordConfirm",type:"password",id:"passwordConfirm",onChange:function(e){return b(e,c,r)},required:!0}),Object(l.jsxs)("fieldset",{className:"wrapper",onChange:function(e){return b(e,c,r)},required:!0,children:[Object(l.jsx)("legend",{children:"Role:"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{id:"general",type:"radio",name:"roleSelection",value:"user"}),Object(l.jsx)("label",{htmlFor:"user",children:"I'm hiring Los Dorados!"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{id:"member",type:"radio",name:"roleSelection",value:"member"}),Object(l.jsx)("label",{htmlFor:"user",children:"I'm a member of Los Dorados."})]})]}),Object(l.jsx)("button",{type:"submit",onClick:function(t){return function(t){t.preventDefault(),j(!0),d()({method:"post",url:"https://dorados-gig-tracker.herokuapp.com/api/v1/users/signup",data:c}).then((function(n){console.log("res: ",n),j(!1),201===n.status&&(e.handleLogin(t,c),window.localStorage.setItem("user",JSON.stringify(n.data)))})).catch((function(e){j(!1),alert("sorry could not sign up",e)}))}(t)},children:"Sign up"})]}),u?Object(l.jsx)("div",{className:"loader",children:Object(l.jsxs)("div",{className:"lds-ripple",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})}):null]})}function O(e){var t=Object(i.useState)({}),n=Object(s.a)(t,2),c=n[0],r=n[1],a=Object(i.useState)(!0),o=Object(s.a)(a,2),u=o[0],j=o[1],O=Object(i.useState)(!1),m=Object(s.a)(O,2),p=m[0],g=m[1],x=function(t,n){t.preventDefault(),g(!0),d()({method:"post",url:"https://dorados-gig-tracker.herokuapp.com/api/v1/users/login",data:n}).then((function(t){e.setUser(t.data),window.localStorage.setItem("user",JSON.stringify(t.data)),e.setLoggedIn(!0),g(!1)})).catch((function(e){g(!1),alert("sorry could not log you in",e)}))};return Object(l.jsxs)("div",{className:"login",children:[u?Object(l.jsxs)("div",{className:"loginForm",children:[Object(l.jsx)("h1",{children:"Login"}),Object(l.jsxs)("form",{action:"submit",children:[Object(l.jsx)("label",{htmlFor:"emailInput",children:"Email: "}),Object(l.jsx)("input",{name:"emailInput",type:"email",id:"email",onChange:function(e){return b(e,c,r)}}),Object(l.jsx)("label",{htmlFor:"passwordInput",children:"Password: "}),Object(l.jsx)("input",{name:"passwordInput",type:"password",id:"password",onChange:function(e){return b(e,c,r)}}),Object(l.jsx)("button",{type:"submit",onClick:function(e){x(e,c)},children:"Login"})]}),Object(l.jsx)("button",{className:"signupButton",onClick:function(){return j(!1)},children:"Don't have an account? Sign Up"})]}):Object(l.jsx)(h,{handleLogin:x,setReqData:r}),p?Object(l.jsx)("div",{className:"loader",children:Object(l.jsxs)("div",{className:"lds-ripple",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})}):null]})}var m=n(6);function p(e){var t=Object(i.useState)({musicians:[],public:!1,date:"",hour:"",time:""}),n=Object(s.a)(t,2),c=n[0],r=n[1],a=Object(i.useState)(!1),o=Object(s.a)(a,2),u=o[0],h=o[1],O=function(e){var t=Object(j.a)({},c),n=e.target.id;t.musicians.includes(n)?t.musicians=t.musicians.filter((function(e){return e!==n})):t.musicians.push(n),r(t)},m=function(e){var t=Object(j.a)({},c);t[e]=!t[e],r(t)},p=function(e){var t=Object(j.a)({},c);"date"===e.target.name?t.date=e.target.value:"hour"===e.target.name&&(t.hour=e.target.value),t.time=t.date+" "+t.hour,r(t)};return Object(l.jsxs)("div",{className:"createGig wrapper",children:[Object(l.jsx)("h2",{children:"New Gig"}),Object(l.jsxs)("form",{action:"submit",id:"createGig",children:[Object(l.jsx)("label",{htmlFor:"title",children:"title (more than 4 characters, required): "}),Object(l.jsx)("input",{name:"title",type:"text",id:"title",onChange:function(e){return b(e,c,r)},required:!0}),Object(l.jsx)("label",{htmlFor:"venue",children:"venue: "}),Object(l.jsx)("input",{name:"venue",type:"text",id:"venue",onChange:function(e){return b(e,c,r)}}),Object(l.jsx)("label",{htmlFor:"venueAddress",children:"Venue Address (required): "}),Object(l.jsx)("input",{name:"venueAddress",type:"text",id:"venueAddress",onChange:function(e){return b(e,c,r)},required:!0}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"date",children:"Date (required): "}),Object(l.jsx)("input",{name:"date",type:"date",onChange:function(e){return p(e)},required:!0})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"hour",children:"Hour (required): "}),Object(l.jsx)("input",{name:"hour",id:"hour",type:"time",onInput:function(e){return p(e)},required:!0})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"gigDuration",children:"Gig Duration: "}),Object(l.jsxs)("select",{name:"gigDuration",id:"gigDuration",form:"createGig",onChange:function(e){return b(e,c,r)},children:[Object(l.jsx)("option",{value:"",defaultValue:!0,children:"Provide Gig Length"}),Object(l.jsx)("option",{value:"0.5",children:"30mins"}),Object(l.jsx)("option",{value:"1",children:"1 hour"}),Object(l.jsx)("option",{value:"2",children:"2 hours"}),Object(l.jsx)("option",{value:"3",children:"3 hours"})]})]}),Object(l.jsxs)("fieldset",{className:"chooseMusicians",children:[Object(l.jsx)("legend",{children:"Choose musicians"}),["Alex","Angel","Boris","Mark","Jeremy","Julian","Matt","MikeViolin","MikeTrumpet","Nathan","Pat","Paul","Ray","Roberto"].map((function(e,t){return Object(l.jsxs)("div",{className:"musicianCheck",children:[Object(l.jsx)("input",{type:"checkbox",id:e,name:e,onChange:O}),Object(l.jsxs)("label",{htmlFor:e,children:[e," "]})]},"musician"+t)}))]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"public",children:"public: "}),Object(l.jsx)("input",{name:"public",type:"checkbox",id:"public",onChange:function(e){return m(e.target.id)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"restaurant",children:"restaurant gig? "}),Object(l.jsx)("input",{name:"restaurant",type:"checkbox",id:"restaurant",onChange:function(e){return m(e.target.id)}})]}),Object(l.jsx)("label",{htmlFor:"description",children:"description: "}),Object(l.jsx)("input",{name:"description",type:"text",id:"description",onChange:function(e){return b(e,c,r)}}),Object(l.jsxs)("fieldset",{className:"chooseSuit",onChange:function(e){return b(e,c,r)},children:[Object(l.jsx)("legend",{children:"Choose suit "}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{name:"suit",type:"radio",id:"black",value:"black"}),Object(l.jsx)("label",{htmlFor:"black",children:"Black"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{name:"suit",type:"radio",id:"red",value:"red"}),Object(l.jsx)("label",{htmlFor:"red",children:"Red"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{name:"suit",type:"radio",id:"brown",value:"brown"}),Object(l.jsx)("label",{htmlFor:"brown",children:"Brown"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{name:"suit",type:"radio",id:"grey",value:"grey"}),Object(l.jsx)("label",{htmlFor:"grey",children:"Grey"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{name:"suit",type:"radio",id:"canada",value:"canada"}),Object(l.jsx)("label",{htmlFor:"canada",children:"Canada White"})]})]}),Object(l.jsx)("label",{htmlFor:"notes",children:"notes: "}),Object(l.jsx)("input",{name:"notes",type:"text",id:"notes",onChange:function(e){return b(e,c,r)}}),Object(l.jsx)("button",{type:"reset",children:"Reset Form"}),Object(l.jsx)("button",{type:"submit",onClick:function(t){return function(t){t.preventDefault(),h(!0),d()({method:"post",url:"https://dorados-gig-tracker.herokuapp.com/api/v1/gigs",data:c}).then((function(){h(!1),e.getGigs()})).catch((function(e){h(!1),alert("Error: ".concat(e))}))}(t)},children:"Create Gig"})]}),u?Object(l.jsx)("div",{className:"loader",children:Object(l.jsxs)("div",{className:"lds-ripple",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})}):null]})}function g(e){var t=Object(i.useState)({musicians:Object(m.a)(e.gig.musicians),public:e.gig.public}),n=Object(s.a)(t,2),c=n[0],r=n[1],a=Object(i.useState)(!1),o=Object(s.a)(a,2),u=o[0],h=o[1],O=function(e){var t=Object(j.a)({},c),n=e.target.id;t.musicians.includes(n)?t.musicians=t.musicians.filter((function(e){return e!==n})):t.musicians.push(n),r(t)},p=function(e){var t=Object(j.a)({},c);t[e]=!t[e],r(t)},g=function(e){var t=Object(j.a)({},c);"date"===e.target.name?t.date=e.target.value:"hour"===e.target.name&&(t.hour=e.target.value),t.time=t.date+" "+t.hour,r(t)};return Object(l.jsxs)("div",{className:"createGig",children:[Object(l.jsx)("h2",{children:"Update Gig"}),Object(l.jsxs)("form",{action:"submit",id:"createGig",children:[Object(l.jsx)("label",{htmlFor:"title",children:"title (more than 4 characters): "}),Object(l.jsx)("input",{name:"title",type:"text",id:"title",defaultValue:e.gig.title,onChange:function(e){return b(e,c,r)}}),Object(l.jsx)("label",{htmlFor:"venue",children:"venue: "}),Object(l.jsx)("input",{name:"venue",type:"text",id:"venue",defaultValue:e.gig.venue,onChange:function(e){return b(e,c,r)}}),Object(l.jsx)("label",{htmlFor:"venueAddress",children:"Venue Address: "}),Object(l.jsx)("input",{name:"venueAddress",type:"text",id:"venueAddress",defaultValue:e.gig.venueAddress,onChange:function(e){return b(e,c,r)}}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"date",children:"Date: "}),Object(l.jsx)("input",{name:"date",type:"date",onChange:function(e){return g(e)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"hour",children:"Hour: "}),Object(l.jsx)("input",{name:"hour",id:"hour",type:"time",onChange:function(e){return g(e)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"gigDuration",children:"Gig Duration: "}),Object(l.jsxs)("select",{name:"gigDuration",id:"gigDuration",form:"createGig",defaultValue:e.gig.gigDuration,onChange:function(e){return b(e,c,r)},children:[Object(l.jsx)("option",{value:"",defaultValue:!0,children:"Provide Gig Length"}),Object(l.jsx)("option",{value:"0.5",children:"30mins"}),Object(l.jsx)("option",{value:"1",children:"1 hour"}),Object(l.jsx)("option",{value:"2",children:"2 hours"}),Object(l.jsx)("option",{value:"3",children:"3 hours"})]})]}),Object(l.jsxs)("fieldset",{className:"chooseMusicians",children:[Object(l.jsx)("legend",{children:"Choose musicians"}),["Alex","Angel","Boris","Mark","Jeremy","Julian","Matt","MikeViolin","MikeTrumpet","Nathan","Pat","Paul","Ray","Roberto"].map((function(t,n){return Object(l.jsxs)("div",{className:"musicianCheck",children:[Object(l.jsx)("input",{type:"checkbox",id:t,name:t,defaultChecked:e.gig.musicians.includes(t)?"checked":null,onChange:O}),Object(l.jsxs)("label",{htmlFor:t,children:[t," "]})]},n)}))]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"public",children:"public: "}),Object(l.jsx)("input",{name:"public",type:"checkbox",id:"public",defaultChecked:e.gig.public?"checked":null,onChange:function(e){return p(e.target.id)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"restaurant",children:"restaurant gig? "}),Object(l.jsx)("input",{name:"restaurant",type:"checkbox",id:"restaurant",defaultChecked:e.gig.restaurant?"checked":null,onChange:function(e){return p(e.target.id)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"description",children:"description: "}),Object(l.jsx)("input",{name:"description",type:"text",id:"description",defaultValue:e.gig.description,onChange:function(e){return b(e,c,r)}})]}),Object(l.jsxs)("fieldset",{className:"chooseSuit",onChange:function(e){return b(e,c,r)},children:[Object(l.jsx)("legend",{children:"Choose suit "}),["black","red","brown","grey","canada"].map((function(t,n){return Object(l.jsxs)("div",{children:[t===e.gig.suit?Object(l.jsx)("input",{name:"suit",type:"radio",id:t,value:t,defaultChecked:!0},t+n):Object(l.jsx)("input",{name:"suit",type:"radio",id:t,value:t},t+n),Object(l.jsxs)("label",{htmlFor:t,children:[" ",t]})]})}))]}),Object(l.jsx)("label",{htmlFor:"notes",children:"notes: "}),Object(l.jsx)("input",{name:"notes",type:"text",id:"notes",defaultValue:e.gig.notes,onChange:function(e){return b(e,c,r)}}),Object(l.jsx)("button",{onClick:function(t){t.preventDefault(),e.toggleUpdate(t,e.gig)},children:"Close"}),Object(l.jsx)("button",{type:"submit",onClick:function(t){return function(t,n,i){t.preventDefault(),h(!0),d()({method:n,url:"https://dorados-gig-tracker.herokuapp.com/api/v1/gigs/"+i,data:c,headers:{Authorization:"Bearer "+e.user.token}}).then((function(){h(!1),e.getGigs()})).catch((function(e){h(!1),alert("Error: ".concat(e))}))}(t,"patch",e.gig.id)},children:"Update Gig"})]}),u?Object(l.jsx)("div",{className:"loader",children:Object(l.jsxs)("div",{className:"lds-ripple",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})}):null]})}var x=n(9),f=n.n(x);function v(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),c=n[0],r=n[1],a=Object(i.useState)([]),o=Object(s.a)(a,2),u=o[0],j=o[1],b=Object(i.useState)(!1),h=Object(s.a)(b,2),O=h[0],x=h[1],v=Object(i.useState)(!1),C=Object(s.a)(v,2),y=C[0],k=C[1],w=Object(i.useState)([]),F=Object(s.a)(w,2),D=F[0],N=F[1],S=Object(i.useState)(""),M=Object(s.a)(S,2),A=M[0],G=M[1];Object(i.useEffect)((function(){L(),G(f()(Date()).format("YYYY MM"))}),[]),Object(i.useEffect)((function(){j(c.filter((function(e){return e.month===A})))}),[c,A]);var L=function(){k(!0),d()({method:"get",url:"https://dorados-gig-tracker.herokuapp.com/api/v1/gigs"}).then((function(e){k(!1);var t=Object(m.a)(e.data.data.gigs),n=[];t.map((function(e){return e.time=f()(e.time).format("MMMM DD, YYYY h:mm A"),e.month=f()(e.time).format("YYYY MM"),n.includes(e.month)||n.push(e.month),e})),t.sort((function(e,t){return new Date(e.time)-new Date(t.time)})),t.showAll=!1,t.update=!1,t.confirmDelete=!1,N(n),x(!1),r(t),j(c)})).catch((function(e){k(!1),alert("sorry, was not able to get the gigs",e)}))},I=function(){var e=O;x(e=!e)},q=function(e,t){e.preventDefault();var n=Object(m.a)(c).map((function(e){return e.id===t.id?(e.updateStatus=!e.updateStatus,e):e}));r(n)},P=function(e,t){e.preventDefault();var n=Object(m.a)(c).map((function(e){return e.id===t.id?(e.confirmDelete=!e.confirmDelete,e):e}));r(n)};return Object(l.jsxs)("div",{className:"wrapper",children:["admin"===e.user.data.user.role?Object(l.jsx)("button",{onClick:I,className:"createGigButton",children:"Create a new Gig"}):null,"admin"===e.user.data.user.role&&O?Object(l.jsxs)("div",{children:[Object(l.jsx)(p,{getGigs:L,gigs:c,user:e.user}),Object(l.jsx)("button",{onClick:I,children:"Hide Form"})]}):null,Object(l.jsxs)("h3",{children:["Here are the gigs, ",e.user.data.user.name,":"]}),Object(l.jsxs)("div",{className:"gigContainer",children:[Object(l.jsxs)("form",{action:"submit",onChange:function(e){return G(e.target.value)},children:[Object(l.jsx)("label",{htmlFor:"selectMonth",children:"Select Month:"}),Object(l.jsx)("select",{name:"selectMonth",id:"selectMonth",children:D.map((function(e){return Object(l.jsx)("option",{selected:e===A?"selected":null,children:e})}))})]}),u.length>0?u.map((function(t){return Object(l.jsxs)("div",{className:"gig",children:[Object(l.jsxs)("h4",{children:[t.time,": ",t.title]}),Object(l.jsxs)("p",{children:["Address: ",t.venueAddress]}),Object(l.jsxs)("p",{children:["Duration: ",t.duration]}),Object(l.jsxs)("p",{children:["Musicians: ",t.musicians.map((function(e){return Object(l.jsxs)("span",{children:[e," "]},e)}))]}),Object(l.jsxs)("p",{children:["Public/private: ",t.public?"public gig":"private"]}),Object(l.jsxs)("p",{children:["Duration: ",t.durationMinutes," min"]}),Object(l.jsx)("button",{onClick:function(e){return function(e,t){e.preventDefault();var n=Object(m.a)(c).map((function(e){return e.id===t.id?(e.showAll=!e.showAll,e):e}));r(n)}(e,t)},children:"More info"}),t.showAll?Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:["Description: ",t.description]}),Object(l.jsxs)("p",{children:["Suit: ",t.suit]}),Object(l.jsxs)("p",{children:["Restaurant?: ",t.restaurant?"Restaurant Gig":"Not a restaurant gig"]}),Object(l.jsxs)("p",{children:["Notes: ",t.notes]})]}):null,"admin"===e.user.data.user.role?Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{onClick:function(e){return q(e,t)},children:"Update"}),Object(l.jsx)("button",{onClick:function(e){P(e,t)},children:"Delete"})]}):null,t.updateStatus?Object(l.jsx)(g,{gigs:c,getGigs:L,gig:t,toggleUpdate:q,user:e.user}):null,t.confirmDelete?Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Are you sure you want to Delete?"}),Object(l.jsx)("button",{onClick:function(n){return function(t,n){t.preventDefault(),k(!0),d()({method:"delete",url:"https://dorados-gig-tracker.herokuapp.com/api/v1/gigs/".concat(n),headers:{Authorization:"Bearer "+e.user.token}}).then((function(){k(!1),L()})).catch((function(e){k(!1),alert("sorry, was not able to delete the gig",e)}))}(n,t.id)},children:"Delete"}),Object(l.jsx)("button",{onClick:function(e){return P(e,t)},children:"Cancel"})]}):null,y?Object(l.jsx)("div",{className:"loader",children:Object(l.jsxs)("div",{className:"lds-ripple",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})}):null]},t.id)})):Object(l.jsx)("p",{children:"No gigs yet! Add a new gig with the button above"})]})]})}function C(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)({}),a=Object(s.a)(r,2),u=a[0],d=a[1];Object(i.useEffect)((function(){var e=localStorage.getItem("user");e&&(d(JSON.parse(e)),c(!0))}),[]);return Object(l.jsxs)("div",{className:"app",children:[Object(l.jsxs)("header",{children:[Object(l.jsx)(o,{}),n?Object(l.jsx)("div",{className:"buttonContainer",children:Object(l.jsx)("button",{onClick:function(){return window.localStorage.removeItem("user"),c(!1),void d({})},children:"Logout"})}):null]}),Object(l.jsx)("main",{children:n?Object(l.jsx)("div",{children:Object(l.jsx)(v,{user:u})}):Object(l.jsx)(O,{setLoggedIn:c,setUser:d})}),Object(l.jsxs)("footer",{children:["Created by ",Object(l.jsx)("a",{href:"http://borisweb.dev",children:"Boris"})," for ",Object(l.jsx)("a",{href:"https://www.losdoradoscanada.com/",children:"Mariachi Los Dorados"})]})]})}var y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),c(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root")),y()}},[[47,1,2]]]);
//# sourceMappingURL=main.6535c166.chunk.js.map